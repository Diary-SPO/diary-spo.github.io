import{_ as t,o as e,D as s,L as a,d as n}from"./index-ca5a2898.js";import{B as o}from"./Button-516c24cf.js";import{P as r}from"./Panel-8e9289e5.js";import{B as i}from"./ButtonGroup-6b76a1a7.js";import{M as c,h as m,T as l,p as d}from"./@vkontakte/icons-d137ec12.js";import{m as u,h as p}from"./makeRequest-d3f44c26.js";import{P as h}from"./PanelHeaderWithBack-7d3f056b.js";import{u as j}from"./useRateLimitExceeded-736253de.js";import"./Snackbar-016ea5a4.js";const f=c((()=>t((()=>import("./SubjectsList-9262be53.js")),["assets/SubjectsList-9262be53.js","assets/index-ca5a2898.js","assets/@vkontakte/icons-d137ec12.js","assets/index-349a8e69.css"]))),k=({id:t})=>{const[a,n]=m(!1),[o,i]=m(!1),[c,k]=m(null),g=l((async()=>{i(!0),n(!1);try{const t=await(async()=>{const t=localStorage.getItem("cookie"),e=localStorage.getItem("id");return t?u(`/attestation/${e}`):418})();p(t,(()=>{n(!0),i(!1)}),(()=>{j(),n(!0),i(!1)}),(t=>{i(t)})),k(t)}catch(t){n(!0)}finally{i(!1)}}),[]);d((()=>{g()}),[]);const b={};let y=null,v=null;return c&&c.students&&(v=c.year,y=`\n    ${c.students[0].lastName}\n    ${c.students[0].firstName.slice(0,1)}.\n    ${c.students[0].middleName.slice(0,1)}.`),c&&c.subjects&&c.subjects.forEach((t=>{const e=`Семестр ${c.termNumber}`;b[e]||(b[e]=[]),b[e].push(t)})),e(r,{nav:t,children:[e(h,{title:"Аттестация"}),e(s,{children:[e(f,{isDataLoading:o,semesters:b,studentName:y,year:v}),a&&e(_,{onClick:g})]})]})},_=({onClick:t})=>e(n,{header:"Ошибка при загрузке",action:e(i,{mode:"vertical",align:"center",children:[e(o,{size:"s",onClick:t,children:"Попробовать снова"}),e(a,{href:"https://vk.me/dnevnik_spo",target:"_blank",children:"Сообщить о проблеме"})]})});export{k as default};
